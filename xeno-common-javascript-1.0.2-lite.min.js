/*!
 * Copyright (c) 2017 Kai Feng, All rights reserved.
 * The source code is available at: "https://github.com/kfeng2015/xeno-common-javascript".
 */
(function(){window.xeno={common:{lang:{},text:{},util:{}}};xeno.common.onCompleteCallbacks=[]})();xeno.common.lang.Data=(function(){var a=null;xeno.common.onCompleteCallbacks.push(function(){a=xeno.common.lang.Data});return{isUndefined:function(b){return typeof(b)==="undefined"},isNull:function(b){return b===null},isUndefinedOrNull:function(b){return a.isUndefined(b)||a.isNull(b)},isString:function(c){try{return typeof(c)==="string"||c.constructor===String}catch(b){return false}},isNumber:function(b){return !a.isString(b)&&!isNaN(parseFloat(b))&&isFinite(b)},isBoolean:function(c){try{return typeof(c)==="boolean"||c.constructor===Boolean}catch(b){return false}},isArray:function(c){try{return c.constructor===Array}catch(b){return false}},isDate:function(c){try{return c.constructor===Date}catch(b){return false}},isRegExp:function(c){try{return c.constructor===RegExp}catch(b){return false}},isFunction:function(c){try{return typeof(c)==="function"||c.constructor===Function}catch(b){return false}}}})();xeno.common.lang.EventDispatcher=function(){var a=xeno.common.lang.Data;this.addEventListener=function(d,e){var c=b[d];if(a.isUndefined(c)){b[d]=[];c=b[d]}if(c.indexOf(e)<0){c.push(e)}};this.removeEventListener=function(e,f){var c=b[e];if(!a.isUndefined(c)){var d=c.indexOf(f);if(d>=0){c.splice(d,1);if(c.length===0){delete b[e]}}}};this.hasEventListener=function(d,f){var c=b[d];try{return c.indexOf(f)>=0}catch(e){return false}};this.dispatchEvent=function(e,h,g){var c=b[e];try{for(var d=0;d<c.length;d+=1){try{c[d]({type:e,target:h,data:g})}catch(f){}}}catch(f){}};this.findEventListeners=function(c){return b[c]};var b={}};xeno.common.lang.GUID=(function(){return{nextValue:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){var b=Math.random()*16|0;var a=(d==="x")?b:(b&3|8);return a.toString(16)})}}})();xeno.common.lang.Paging=function(j,g,e){var f=xeno.common.util.NumberUtils;this.getPageNum=function(){return e};this.getPageTotal=function(){return c};this.getPageSize=function(){return g};this.getDataTotal=function(){return j};var b=function(l,k){if(l===i){return a}return Math.ceil(l/k)};var h=function(k,l){if(k===a){return a}if(l<=a){return a+1}if(l>=k){return k}return l};var a=0;var d=1;var i=0;var j=j<i?i:j;var g=g<d?d:g;var c=b(j,g);var e=h(c,e)};xeno.common.lang.Timer=function(f,g){var c=xeno.common.lang.EventDispatcher;var k=xeno.common.util.NumberUtils;c.call(this);this.start=function(){if(h===false&&d===false){h=true;i()}};this.stop=function(){try{clearTimeout(a)}catch(m){}a=null;h=false};this.reset=function(){l.stop();j=0;d=false};this.isRunning=function(){return h};this.getDelay=function(){return e};this.getCurrentCount=function(){return j};this.getRepeatCount=function(){return b};var i=function(){if(b>=0&&j>=b){l.stop();d=true;l.dispatchEvent("complete",l,{running:h,delay:e,currentCount:j,repeatCount:b})}else{a=setTimeout(function(){a=null;j+=1;l.dispatchEvent("progress",l,{running:h,delay:e,currentCount:j,repeatCount:b});if(h===true&&d===false){i()}},e)}};var e=f<20?20:f;var b=arguments.length<2?-1:(g<0?-1:g);var l=this;var j=0;var a=null;var h=false;var d=false};xeno.common.lang.URL=function(d){var c=xeno.common.lang.Data;this.getParam=function(f){var g=e[f];return c.isUndefined(g)?null:g};this.setParam=function(f,g){e[f]=""+g};this.removeParam=function(f){delete e[f]};this.getAnchor=function(){return b};this.setAnchor=function(f){b=f};this.removeAnchor=function(){b=null};this.toURL=function(){return a(function(f){return encodeURIComponent(f)})};this.toString=function(){return a(function(f){return f})};var a=function(l){var h=[];var k="";for(var g in e){h.push(l(g)+"="+l(e[g]))}if(b!==null){k=l(b)}var f=h.length>0?("?"+h.join("&")):"";var j=k.length>0?("#"+k):"";return d+f+j};var e={};var b=null};xeno.common.text.DateFormat=function(f){var d=xeno.common.lang.Data;var a=xeno.common.text.NumberFormat;var g=xeno.common.util.DateUtils;this.format=function(k){var q=k.getFullYear().toString();var n=q.substring(2);var p=k.getMonth();var r=k.getDate();var s=k.getHours();var m=s<12?s:s-12;var l=k.getMinutes();var i=k.getSeconds();var t=k.getMilliseconds();var j=g.getDayOfWeek(k);var o=h(s,l,i,t);return f.replace(/yyyy/g,q).replace(/yy/g,n).replace(/MM/g,e.format(p+1)).replace(/M/g,(p+1)).replace(/dd/g,e.format(r)).replace(/d/g,r).replace(/hh/g,e.format(m)).replace(/h/g,m).replace(/HH/g,e.format(s)).replace(/H/g,s).replace(/mm/g,e.format(l)).replace(/m/g,l).replace(/ss/g,e.format(i)).replace(/s/g,i).replace(/SSS/g,b.format(t)).replace(/S/g,t).replace(/a/g,o).replace(/A/g,o.toUpperCase()).replace(/E/g,j)};var h=function(i,l,j,k){if(i<12||(i===12&&l===0&&j===0&&k===0)){return c[0]}return c[1]};var c=["am","pm"];var e=new a("00");var b=new a("000")};xeno.common.text.NumberFormat=function(e){var d=xeno.common.lang.Data;var g=xeno.common.util.StringUtils;this.format=function(j){var h=g.removeStart(j.toFixed(a.length),"-").split(".");var o=h[0].split("").reverse();var i=h.length>1?h[1].split(""):[];var l=[];var n=[];if(o.length>=f.length){l=o.concat([])}else{c(f,o,l)}c(a,i,n);var k=l.reverse().join("");var m=g.removeEnd("."+n.join(""),".");return(j<0?"-":"")+k+m};var c=function(j,k,o){for(var l=0;l<j.length;l+=1){var h=j[l];var n=k[l];var m=d.isUndefined(n)||n==="0";if(h==="#"&&m){o.push("")}else{if(h==="0"&&m){o.push("0")}else{o.push(n)}}}};var b=e.split(".");var f=b[0].split("").reverse();var a=b.length>1?b[1].split(""):[]};xeno.common.util.ArrayUtils=(function(){var a=null;var b=null;xeno.common.onCompleteCallbacks.push(function(){a=xeno.common.lang.Data;b=xeno.common.util.NumberUtils});return{contains:function(c,d){return c.indexOf(d)>=0},insert:function(c,f,e){var g=Number.MAX_VALUE;if(arguments.length>2){g=e}var d=c.concat([]);d.splice(g,0,f);return d},remove:function(c,e){var d=c.concat([]);d.splice(e,1);return d},subarray:function(c,e,f){var d=Number.MAX_VALUE;if(arguments.length>2){d=f}return c.concat([]).slice(e,d)}}})();xeno.common.util.DateUtils=(function(){var a=null;var d=null;var b=null;xeno.common.onCompleteCallbacks.push(function(){a=xeno.common.lang.Data;d=xeno.common.util.DateUtils;b=xeno.common.util.NumberUtils});var c=86400000;return{isLeapYear:function(e){if(e%400===0){return true}if(e%4===0&&e%100!==0){return true}return false},getDayOfYear:function(e){var g=new Date(e.getFullYear(),e.getMonth(),e.getDate());var f=new Date(e.getFullYear(),0,1);return(g.getTime()-f.getTime())/c+1},getDayOfMonth:function(e){return e.getDate()},getDayOfWeek:function(f){var e=f.getDay();return e===0?7:e},getMonthOfYear:function(e){return e.getMonth()+1},getWeekOfYear:function(e){var g=new Date(e.getFullYear(),e.getMonth(),e.getDate()+4-d.getDayOfWeek(e));var f=new Date(g.getFullYear(),0,1);return Math.ceil((((g.getTime()-f.getTime())/c)+1)/7)}}})();xeno.common.util.HtmlStringUtils=(function(){var a=null;xeno.common.onCompleteCallbacks.push(function(){a=xeno.common.lang.Data});return{encode:function(b){return b.replace(/[<>&'"\s]/g,function(d){return{"<":"&lt;",">":"&gt;","&":"&amp;","'":"&#39;",'"':"&quot;"," ":"&nbsp;"}[d]})},decode:function(b){return b.replace(/(&lt;)|(&gt;)|(&amp;)|(&#39;)|(&quot;)|(&nbsp;)/g,function(c){return{"&lt;":"<","&gt;":">","&amp;":"&","&#39;":"'","&quot;":'"',"&nbsp;":" "}[c]})}}})();xeno.common.util.NumberUtils=(function(){var a=null;xeno.common.onCompleteCallbacks.push(function(){a=xeno.common.lang.Data});return{isInt:function(b){if(a.isNumber(b)){return b.toString().indexOf(".")<0}return false},isFloat:function(b){if(a.isNumber(b)){return b.toString().indexOf(".")>0}return false}}})();xeno.common.util.ObjectArrayUtils=(function(){var b=null;var c=null;var a=null;xeno.common.onCompleteCallbacks.push(function(){b=xeno.common.lang.Data;c=xeno.common.util.NumberUtils;a=xeno.common.util.ObjectArrayUtils});return{indexOf:function(h,d,k,f){var m=-1;if(arguments.length>3){m=f}var j=h.length-1;for(var g=0;g<=j;g+=1){try{var l=h[g];if(l.hasOwnProperty(d)){if(l[d]===k){m=g;break}}}catch(e){}}return m},lastIndexOf:function(h,d,k,f){var m=-1;if(arguments.length>3){m=f}var j=h.length-1;for(var g=j;g>=0;g-=1){try{var l=h[g];if(l.hasOwnProperty(d)){if(l[d]===k){m=g;break}}}catch(e){}}return m},itemOf:function(g,d,k,j){var m=null;if(arguments.length>3){m=j}var h=g.length-1;for(var f=0;f<=h;f+=1){try{var l=g[f];if(l.hasOwnProperty(d)){if(l[d]===k){m=l;break}}}catch(e){}}return m},lastItemOf:function(g,d,k,j){var m=null;if(arguments.length>3){m=j}var h=g.length-1;for(var f=h;f>=0;f-=1){try{var l=g[f];if(l.hasOwnProperty(d)){if(l[d]===k){m=l;break}}}catch(e){}}return m},contains:function(d,f,e){return a.indexOf(d,f,e)>=0},insertUnique:function(d,i,g,f){var h=Number.MAX_VALUE;if(arguments.length>3){h=f}var e=d.filter(function(k){try{if(k.hasOwnProperty(i)&&g.hasOwnProperty(i)){return k[i]!==g[i]}}catch(j){}return true});e.splice(h,0,g);return e},remove:function(d,g,f){var e=d.filter(function(i){try{if(i.hasOwnProperty(g)){return i[g]!==f}}catch(h){}return true});return e}}})();xeno.common.util.RandomUtils=(function(){var a=null;xeno.common.onCompleteCallbacks.push(function(){a=xeno.common.util.NumberUtils});return{generateInt:function(c,b){return Math.floor(Math.random()*(b-c+1))+c}}})();xeno.common.util.StringUtils=(function(){var a=null;var b=null;var d=null;xeno.common.onCompleteCallbacks.push(function(){a=xeno.common.lang.Data;b=xeno.common.util.NumberUtils;d=xeno.common.util.StringUtils});var c=function(k,j,h,e){var f=k.indexOf(j);if(f>=0){var i=k.substring(0,f);var g=k.substring(f+j.length);e.push(i+h);c(g,j,h,e)}else{e.push(k)}};return{trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},equals:function(f,e){return f===e},equalsIgnoreCase:function(f,e){return f.toUpperCase()===e.toUpperCase()},isEmpty:function(e){return e.length===0},isBlank:function(e){return d.trim(e).length===0},contains:function(f,e){return f.indexOf(e)>=0},startsWith:function(f,e){return f.indexOf(e)===0},endsWith:function(g,f){var e=g.lastIndexOf(f);return e<0?false:f===g.substring(e)},reverse:function(e){return e.split("").reverse().join("")},abbreviate:function(g,f){var e=g.length;var h=f-e;if(h>=0){return g}return g.substring(0,e+h-3)+"..."},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substring(1)},uncapitalize:function(e){return e.charAt(0).toLowerCase()+e.substring(1)},replace:function(h,g,f){if(g.length>0){var e=[];c(h,g,f,e);return e.join("")}return h},remove:function(f,e){return d.replace(f,e,"")},removeStart:function(g,f){var e=g.indexOf(f);if(e===0){return g.substring(f.length)}return g},removeEnd:function(g,f){var e=g.lastIndexOf(f);if(e===g.length-f.length){return g.substring(0,e)}return g}}})();(function(){var b=xeno.common.onCompleteCallbacks;for(var a=0;a<b.length;a+=1){b[a]()}delete xeno.common.onCompleteCallbacks})();